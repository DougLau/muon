<h2>MuON v0.4.0alpha</h2>
<p><em>Micro Object Notation</em>
<br/><sub><sub>¬†¬†¬†¬†by Douglas Lau</sub></sub></p>
<p><strong>MuON</strong> is a text format for data serialization.  It is suitable for
configuration files and data interchange ‚Äî as expressive as other formats, but
<a href="WHY.md">much simpler</a>.</p>
<pre><code class="language-muon"># MuON example
movie: Alien
  director: Ridley Scott
  cast:=Sigourney Weaver
      :=Tom Skerritt
      :=John Hurt
  release: 1979-06-22
    region: USA
  release: 1979-09-06
    region: UK
  gross: 203_630_630
  emoji: üëΩ üëæ
</code></pre>
<h3>Specification</h3>
<p><strong>MuON</strong> is <a href="https://home.unicode.org/">Unicode</a> text encoded in
<a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a>, with no
<a href="https://unicode.org/glossary/#byte_order_mark">byte-order mark</a>.
MuON is case sensitive.</p>
<p>Every <em>line feed</em> (U+000A) marks the end of a <strong>line</strong>.  There are three types:
<em>blank</em>, <em>comment</em> and <em>definition</em>.  <strong>Blank</strong> lines contain no characters.
<strong>Comments</strong> begin with a number sign <code>#</code>, which may be preceded by spaces.</p>
<pre><code class="language-muon">  # Example comment
</code></pre>
<p>A <strong>definition</strong> maps a <em>key</em> to a <em>value</em>, with a colon and space <code>:</code>¬†between.</p>
<pre><code class="language-muon">key: value
</code></pre>
<p>If the value is empty, the space is not required.</p>
<p>Some definitions create <strong>branches</strong>.  Starting from a <em>root record</em>, all
branches form a tree.  With no <em>indents</em>, definitions are contained in the root.
After a branch, subsequent definitions with one more indent are contained in
it.</p>
<pre><code class="language-muon">key_in_root: value in root
branch:
  key_in_branch: value in branch
</code></pre>
<p>Definition <strong>indents</strong> are exactly 2, 3 or 4 spaces (U+0020).  <em>Nested</em> branches
use multiple indents.  The number of spaces must be the same for all indents
in a file.</p>
<pre><code class="language-muon">family: Ursidae
   # One indent; 3 spaces
   genus: Ailuropoda
      # Two indents; 6 spaces
      species: A. melanoleuca üêº
</code></pre>
<p>A <strong>key</strong> is a sequence of one or more characters.  It must be <code>&quot;</code><strong>quoted</strong><code>&quot;</code>
if it contains a colon or begins with a space, quote mark or number sign.  In
this case, all quote marks in the key must be <em>doubled</em>.</p>
<pre><code class="language-muon"># &quot;skeleton&quot; key begins with a quote mark
&quot;&quot;&quot;skeleton&quot;&quot; key&quot;: value
</code></pre>
<p>Also, a key <em>should</em> be quoted if it begins with
<a href="https://en.wikipedia.org/wiki/Whitespace_character">whitespace</a>, contains
<a href="https://en.wikipedia.org/wiki/Unicode_control_characters">control characters</a>
or <a href="https://en.wikipedia.org/wiki/Homoglyph#Unicode_homoglyphs">homoglyphs</a>
of colon.</p>
<p>A <strong>value</strong> is a sequence of characters.  With the exception of <em>line feed</em>, any
Unicode character is allowed.</p>
<h3>Schema</h3>
<p>A <strong>schema</strong> is a template with <em>types</em> as values.  It can be separate or
prepended to a MuON file.  In either case, it begins and ends with a line of
three colons.</p>
<pre><code class="language-muon">:::
# Example MuON schema
movie: list record
  title: text
  director: text Alan Smithee
  cast: list text
  release: list record
    release_date: date
    region: text
  gross: int
  emoji: optional text
:::
</code></pre>
<p>There are ten available <strong>types</strong>: <code>text</code>, <code>bool</code>, <code>int</code>, <code>number</code>, <code>datetime</code>,
<code>date</code>, <code>time</code>, <code>record</code>, <code>dictionary</code> and <code>any</code>.  They are used to parse
<strong>objects</strong> from <em>values</em>.</p>
<p>A <strong>modifier</strong> may precede the type.  It is either <code>optional</code> or <code>list</code>,
followed by a space.</p>
<p>A <strong>default</strong> value can follow the type, with a space between.  It is a value
for the type, used when a definition is not present.  Defaults are only allowed
for <code>text</code>, <code>bool</code>, <code>int</code>, <code>number</code>, <code>datetime</code>, <code>date</code> and <code>time</code> types
without <code>optional</code> or <code>list</code> modifiers.</p>
<p>Type <strong>constraints</strong> can follow the type to limit allowed values.  There are
four available:</p>
<ul>
<li><code>&gt;</code><em>c</em> Greater than <em>c</em></li>
<li><code>&gt;=</code><em>c</em> Greater than or equal to <em>c</em></li>
<li><code>&lt;</code><em>c</em> Less than <em>c</em></li>
<li><code>&lt;=</code><em>c</em> Less than or equal to <em>c</em></li>
</ul>
<p>Constraints are allowed for for <code>text</code>, <code>int</code>, <code>number</code>, <code>datetime</code>, <code>date</code>
and <code>time</code> types.  For <code>text</code>, a constraint applies to the <em>number of
characters</em>.</p>
<p><strong>Text</strong> is a sequence of characters.</p>
<pre><code class="language-muon">:::
greeting: text Hello!
farewell: text Goodbye!
:::
# greeting is Hello!
farewell: Be seeing you.
</code></pre>
<p>Because values cannot contain <em>line feeds</em>, text definitions must be
<strong>appended</strong> to represent them.  This is done with a <strong>text append</strong> separator,
which is <code>:&gt;</code> instead of the usual <code>:</code>¬†between the key and value.  A <em>line
feed</em> is inserted before each appended value.</p>
<p>When appending, use a <strong>blank</strong> key ‚Äî a sequence of spaces with the same number
of characters as the key.</p>
<pre><code class="language-muon">lyric: Out in the garden
     :&gt;There's half of a heaven
</code></pre>
<p><strong>Bool</strong> is a <em>boolean</em>: either <code>true</code> or <code>false</code>.</p>
<pre><code class="language-muon">earth_is_flat: false
</code></pre>
<p><strong>Int</strong> is an <em>integer</em> (whole number) in one of three forms:</p>
<ul>
<li><em>Decimal</em>: sequence of digits <code>0</code>-<code>9</code>.  May have a <code>+</code> or <code>-</code> sign prefix</li>
<li><em>Binary</em>: <code>b</code> followed by sequence of digits <code>0</code> or <code>1</code></li>
<li><em>Hexadecimal</em>: <code>x</code> followed by sequence of digits <code>0</code>-<code>9</code>, <code>A</code>-<code>F</code> or
<code>a</code>-<code>f</code></li>
</ul>
<p>An underscore may be inserted between digits to improve readability.</p>
<pre><code class="language-muon">locke: 4
reyes: b1000
ford: x0F
jarrah: +16
shephard: b01_0111
kwon: x2a
</code></pre>
<p>A <strong>number</strong> is a
<a href="https://en.wikipedia.org/wiki/IEEE_754">floating point</a> number, made up of
these parts:</p>
<ol>
<li><em>Whole number</em> part (same as decimal int)</li>
<li><em>Fractional</em> part (decimal point followed by sequence of digits <code>0</code>-<code>9</code>)</li>
<li><em>Exponent</em> part (<code>e</code> followed by decimal int)</li>
</ol>
<p>One or both of the whole or fractional parts must be present, but the exponent
part is not required.  As with ints, underscores may be included.</p>
<p>The values <code>inf</code> and <code>NaN</code> stand for <em>infinity</em> and <em>not a number</em>,
respectively.  Either can be prefixed with a <code>+</code> or <code>-</code> sign.</p>
<pre><code class="language-muon">prime: 37
log_e_2: .6931471805599453
mercury: -38.83440
planck: 6.626_070_15e-34
buzz: +inf
avogadro: 6.022_140_76e23
</code></pre>
<p><strong>Datetime</strong> is <em>date</em>, <em>time</em> and <em>offset</em>, as specified by <code>date-time</code>
from <a href="https://tools.ietf.org/html/rfc3339#section-5.6">RFC 3339</a>.  The date and
time are separated by an uppercase <code>T</code> only.  If the offset is represented by
<code>Z</code>, it must also be uppercase.</p>
<pre><code class="language-muon">moonwalk: 1969-07-21T02:56:00Z
</code></pre>
<p><strong>Date</strong> is <em>year</em>, <em>month</em> and <em>day</em>, as specified by <code>full-date</code> from
<a href="https://tools.ietf.org/html/rfc3339#section-5.6">RFC 3339</a>.</p>
<pre><code class="language-muon">birthday: 2019-08-01
</code></pre>
<p><strong>Time</strong> is <em>hour</em>, <em>minute</em> and <em>second</em>, as specified by <code>partial-time</code> from
<a href="https://tools.ietf.org/html/rfc3339#section-5.6">RFC 3339</a>.</p>
<pre><code class="language-muon">start: 08:00:00
end: 15:58:14.593849001
</code></pre>
<p>A <strong>record</strong> is a branch containing <em>fields</em> as subsequent definitions.</p>
<pre><code class="language-muon">:::
book: record
  title: text
  author: text
  year: int
:::
book:
  title: If on a winter's night a traveler
  author: Italo Calvino
  year: 1979
</code></pre>
<p><strong>Field</strong> keys are often used in programming languages as
<a href="https://en.wikipedia.org/wiki/Identifier#In_computer_languages">identifiers</a>.
For compatibility, they should contain only ASCII alphanumeric or underscore
characters.</p>
<p>Since records do not use their values, they can <strong>substitute</strong> for the first
field, which must then be left out.  Like defaults, substitution is only
allowed for <code>text</code>, <code>bool</code>, <code>int</code>, <code>number</code>, <code>datetime</code>, <code>date</code> and <code>time</code> types
without <code>optional</code> or <code>list</code> modifiers.</p>
<pre><code class="language-muon">book: The Left Hand of Darkness
  author: Ursula K. Le Guin
  year: 1969
</code></pre>
<p>In the schema, a <strong>record id</strong> can follow <code>record</code> after a space.  It is used
if a record exists in more than one place.  After the first definition, the
fields do not need to be included.</p>
<pre><code class="language-muon">:::
player: record Character
  name: text
  health: int
nemesis: record Character
:::
player: Arthur
  health: 50
nemesis: Mordred
  health: 60
</code></pre>
<p>A <strong>dictionary</strong> is a branch for associative arrays ‚Äî useful if keys are not
known in advance.  The schema must contain a single definition with types for
both key and value.  The key type is restricted to <code>text</code>, <code>bool</code>, <code>int</code>,
<code>number</code>, <code>datetime</code>, <code>date</code> or <code>time</code>.</p>
<pre><code class="language-muon">:::
num_word: dictionary
  text: int
:::
num_word:
  fifty: 50
  one: 1
  thirteen: 13
</code></pre>
<p><strong>Any</strong> is a branch containing data of any type.  It should be used for data
which does not fit into a rigid schema.</p>
<pre><code class="language-muon">:::
product: list record
  name: text
  price: number
  details: any
:::
product: duct tape
  price: 4.99
  details:
    color: silver
    width: 8 cm
product: machete
  price: 29.99
  details:
    length: 50 cm
    weight: 0.5 kg
</code></pre>
<p><strong>Optional</strong> types are not required ‚Äî the absence of a definition represents
a <code>None</code> or <code>null</code> value.</p>
<pre><code class="language-muon">:::
name: text
occupation: optional text
:::
name: Surfer Joe
# no occupation
</code></pre>
<p>A <strong>list</strong> is parsed as a sequence of <em>objects</em>, separated by spaces.  If a
<em>list</em> is empty, omit its definition.</p>
<pre><code class="language-muon">:::
show_times: list time
healthy_snacks: list text
:::
show_times: 15:40:00 18:00:00 20:20:00
# no healthy_snacks
</code></pre>
<p>Like text, <em>lists</em> can be <em>appended</em>.  All <em>objects</em> are added to the end.</p>
<pre><code class="language-muon">fibonacci: 0 1 1 2 3
         : 5 8 13 21 34
# same as fibonacci: 0 1 1 2 3 5 8 13 21 34
</code></pre>
<p>When appending to <strong>list record</strong> or <strong>list dictionary</strong>, the key cannot be
blank, since the definitions are not consecutive.</p>
<pre><code class="language-muon">person: George Washington
  birthday: 1732-02-22
person: Abraham Lincoln
  birthday: 1809-02-12
</code></pre>
<p>For <strong>list text</strong>, <em>objects</em> are separated by spaces, just like other lists.  If
a text <em>object</em> contains spaces, use the <strong>text value</strong> separator <code>:=</code> to treat
an entire <em>value</em> as a single <em>object</em>.  The <em>text append</em> separator <code>:&gt;</code> will
also append an entire <em>value</em> to the previous text <em>object</em>.</p>
<pre><code class="language-muon">shopping: avocado banana
        :=cream cheese
        : cucumber
        :=ice cream
        : raw
        :&gt;burger! (mmmm)
</code></pre>
<h3>Contributing</h3>
<p>Any feedback, bug reports, spelling fixes, or text clarity improvements are
welcome!  Please create an <a href="https://github.com/muon-data/muon/issues">issue</a>.</p>
